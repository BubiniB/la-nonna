{% extends 'base.html' %}

{% block title %} View Reservation {% endblock %}
    {% block content %}
        <h1>View Reservations</h1>

        <form method="POST" action="{% url 'view_reservations' %}">
        {% csrf_token %}
        {{ view_form.email }}
        <div>
                <button type="submit">View Reservation</button>
        </div>
        </form>

        {% if reservation %}
            <h2>Reservation Details:</h2>
                <p>Name: {{ reservation.name }}</p>
                <p>Email: {{ reservation.email }}</p>
                <p>Phone: {{ reservation.phone }}</p>
                <p>Number of Persons: {{ reservation.number_of_persons }}</p>
                <p>Date: {{ reservation.date }}</p>
                <p>Time: {{ reservation.time }}</p>
                <p>If you have any further questions or want to cancel your reservation, please contact us 'here(ahref)' or send an email to info@lanonna.com</p>
        {% endif %}

        {% if request.method == 'POST' and not reservation %}
            {% if view_form.email.errors %}
                <p>Email is required.</p>
            {% else %}
                <p>We cannot find any reservation linked to that email address. Please make sure you use the correct email address and/or check for spelling errors.</p>
            {% endif %}
            <p>If you have any further questions, please contact us 'here(ahref)' or send an email to info@lanonna.com</p>
        {% endif %}
    {% endblock %}
